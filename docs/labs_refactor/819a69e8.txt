{
    "meta": {
        "href": "https://ehrscape.code4health.org/rest/v1/query/?aql=select%20a%20from%20EHR%20e%5Behr_id/value%3D'4ee4bad9-2f9e-4e33-b1d6-6572709cabee'%5D%20contains%20COMPOSITION%20a%20contains%20%20%20%20%20OBSERVATION%20a_b%5BopenEHR-EHR-OBSERVATION.laboratory_test.v0%5D%20where%20a/uid/value%20%3D%20'819a69e8-6399-4250-9670-11cdb2a59b2c::ripple_osi.ehrscape.c4h::1'"
    },
    "aql": "select a from EHR e[ehr_id/value='4ee4bad9-2f9e-4e33-b1d6-6572709cabee'] contains COMPOSITION a contains     OBSERVATION a_b[openEHR-EHR-OBSERVATION.laboratory_test.v0] where a/uid/value = '819a69e8-6399-4250-9670-11cdb2a59b2c::ripple_osi.ehrscape.c4h::1'",
    "executedAql": "select a from EHR e[ehr_id/value='4ee4bad9-2f9e-4e33-b1d6-6572709cabee'] contains COMPOSITION a contains     OBSERVATION a_b[openEHR-EHR-OBSERVATION.laboratory_test.v0] where a/uid/value = '819a69e8-6399-4250-9670-11cdb2a59b2c::ripple_osi.ehrscape.c4h::1'",
    "resultSet": [
        {
            "#0": {
                "@class": "COMPOSITION",
                "name": {
                    "@class": "DV_TEXT",
                    "value": "Laboratory test report"
                },
                "uid": {
                    "@class": "OBJECT_VERSION_ID",
                    "value": "819a69e8-6399-4250-9670-11cdb2a59b2c::ripple_osi.ehrscape.c4h::1"
                },
                "archetype_details": {
                    "@class": "ARCHETYPED",
                    "archetype_id": {
                        "@class": "ARCHETYPE_ID",
                        "value": "openEHR-EHR-COMPOSITION.report-result.v1"
                    },
                    "template_id": {
                        "@class": "TEMPLATE_ID",
                        "value": "IDCR - Laboratory Test Report.v0"
                    },
                    "rm_version": "1.0.1"
                },
                "archetype_node_id": "openEHR-EHR-COMPOSITION.report-result.v1",
                "language": {
                    "@class": "CODE_PHRASE",
                    "terminology_id": {
                        "@class": "TERMINOLOGY_ID",
                        "value": "ISO_639-1"
                    },
                    "code_string": "en"
                },
                "territory": {
                    "@class": "CODE_PHRASE",
                    "terminology_id": {
                        "@class": "TERMINOLOGY_ID",
                        "value": "ISO_3166-1"
                    },
                    "code_string": "GB"
                },
                "category": {
                    "@class": "DV_CODED_TEXT",
                    "value": "event",
                    "defining_code": {
                        "@class": "CODE_PHRASE",
                        "terminology_id": {
                            "@class": "TERMINOLOGY_ID",
                            "value": "openehr"
                        },
                        "code_string": "433"
                    }
                },
                "composer": {
                    "@class": "PARTY_IDENTIFIED",
                    "name": "Dr Lab"
                },
                "context": {
                    "@class": "EVENT_CONTEXT",
                    "start_time": {
                        "@class": "DV_DATE_TIME",
                        "value": "2015-03-22T00:11:02.518+02:00"
                    },
                    "setting": {
                        "@class": "DV_CODED_TEXT",
                        "value": "other care",
                        "defining_code": {
                            "@class": "CODE_PHRASE",
                            "terminology_id": {
                                "@class": "TERMINOLOGY_ID",
                                "value": "openehr"
                            },
                            "code_string": "238"
                        }
                    },
                    "health_care_facility": {
                        "@class": "PARTY_IDENTIFIED",
                        "external_ref": {
                            "@class": "PARTY_REF",
                            "id": {
                                "@class": "GENERIC_ID",
                                "value": "999999-34567",
                                "scheme": "2.16.840.1.113883.2.1.4.3"
                            },
                            "namespace": "NHS-UK",
                            "type": "PARTY"
                        },
                        "name": "Super Labs Inc"
                    }
                },
                "content": [
                    {
                        "@class": "OBSERVATION",
                        "name": {
                            "@class": "DV_TEXT",
                            "value": "Laboratory test"
                        },
                        "archetype_details": {
                            "@class": "ARCHETYPED",
                            "archetype_id": {
                                "@class": "ARCHETYPE_ID",
                                "value": "openEHR-EHR-OBSERVATION.laboratory_test.v0"
                            },
                            "rm_version": "1.0.1"
                        },
                        "archetype_node_id": "openEHR-EHR-OBSERVATION.laboratory_test.v0",
                        "language": {
                            "@class": "CODE_PHRASE",
                            "terminology_id": {
                                "@class": "TERMINOLOGY_ID",
                                "value": "ISO_639-1"
                            },
                            "code_string": "en"
                        },
                        "encoding": {
                            "@class": "CODE_PHRASE",
                            "terminology_id": {
                                "@class": "TERMINOLOGY_ID",
                                "value": "IANA_character-sets"
                            },
                            "code_string": "UTF-8"
                        },
                        "subject": {
                            "@class": "PARTY_SELF"
                        },
                        "data": {
                            "@class": "HISTORY",
                            "name": {
                                "@class": "DV_TEXT",
                                "value": "Event Series"
                            },
                            "archetype_node_id": "at0001",
                            "origin": {
                                "@class": "DV_DATE_TIME",
                                "value": "2015-03-21T00:11:02.518+02:00"
                            },
                            "events": [
                                {
                                    "@class": "POINT_EVENT",
                                    "name": {
                                        "@class": "DV_TEXT",
                                        "value": "Any event"
                                    },
                                    "archetype_node_id": "at0002",
                                    "time": {
                                        "@class": "DV_DATE_TIME",
                                        "value": "2015-03-21T00:11:02.518+02:00"
                                    },
                                    "data": {
                                        "@class": "ITEM_TREE",
                                        "name": {
                                            "@class": "DV_TEXT",
                                            "value": "Tree"
                                        },
                                        "archetype_node_id": "at0003",
                                        "items": [
                                            {
                                                "@class": "ELEMENT",
                                                "name": {
                                                    "@class": "DV_TEXT",
                                                    "value": "Test name"
                                                },
                                                "archetype_node_id": "at0005",
                                                "value": {
                                                    "@class": "DV_CODED_TEXT",
                                                    "value": "Urea, electrolytes and creatinine measurement",
                                                    "defining_code": {
                                                        "@class": "CODE_PHRASE",
                                                        "terminology_id": {
                                                            "@class": "TERMINOLOGY_ID",
                                                            "value": "SNOMED-CT"
                                                        },
                                                        "code_string": "444164000"
                                                    }
                                                }
                                            },
                                            {
                                                "@class": "ELEMENT",
                                                "name": {
                                                    "@class": "DV_TEXT",
                                                    "value": "Test status"
                                                },
                                                "archetype_node_id": "at0073",
                                                "value": {
                                                    "@class": "DV_CODED_TEXT",
                                                    "value": "Final",
                                                    "defining_code": {
                                                        "@class": "CODE_PHRASE",
                                                        "terminology_id": {
                                                            "@class": "TERMINOLOGY_ID",
                                                            "value": "local"
                                                        },
                                                        "code_string": "at0038"
                                                    }
                                                }
                                            },
                                            {
                                                "@class": "ELEMENT",
                                                "name": {
                                                    "@class": "DV_TEXT",
                                                    "value": "Test status timestamp"
                                                },
                                                "archetype_node_id": "at0075",
                                                "value": {
                                                    "@class": "DV_DATE_TIME",
                                                    "value": "2015-02-22T00:11:02.518+02:00"
                                                }
                                            },
                                            {
                                                "@class": "CLUSTER",
                                                "name": {
                                                    "@class": "DV_TEXT",
                                                    "value": "Laboratory test panel"
                                                },
                                                "archetype_details": {
                                                    "@class": "ARCHETYPED",
                                                    "archetype_id": {
                                                        "@class": "ARCHETYPE_ID",
                                                        "value": "openEHR-EHR-CLUSTER.laboratory_test_panel.v0"
                                                    },
                                                    "rm_version": "1.0.1"
                                                },
                                                "archetype_node_id": "openEHR-EHR-CLUSTER.laboratory_test_panel.v0",
                                                "items": [
                                                    {
                                                        "@class": "CLUSTER",
                                                        "name": {
                                                            "@class": "DV_TEXT",
                                                            "value": "Laboratory result"
                                                        },
                                                        "archetype_node_id": "at0002",
                                                        "items": [
                                                            {
                                                                "@class": "ELEMENT",
                                                                "name": {
                                                                    "@class": "DV_CODED_TEXT",
                                                                    "value": "Urea",
                                                                    "defining_code": {
                                                                        "@class": "CODE_PHRASE",
                                                                        "terminology_id": {
                                                                            "@class": "TERMINOLOGY_ID",
                                                                            "value": "SNOMED-CT"
                                                                        },
                                                                        "code_string": "365755003"
                                                                    }
                                                                },
                                                                "archetype_node_id": "at0001",
                                                                "value": {
                                                                    "@class": "DV_QUANTITY",
                                                                    "normal_range": {
                                                                        "@class": "DV_INTERVAL",
                                                                        "lower": {
                                                                            "@class": "DV_QUANTITY",
                                                                            "magnitude": 2.5,
                                                                            "units": "mmol/l"
                                                                        },
                                                                        "upper": {
                                                                            "@class": "DV_QUANTITY",
                                                                            "magnitude": 6.6,
                                                                            "units": "mmol/l"
                                                                        },
                                                                        "lower_unbounded": false,
                                                                        "upper_unbounded": false
                                                                    },
                                                                    "magnitude": 7.4,
                                                                    "units": "mmol/l"
                                                                }
                                                            },
                                                            {
                                                                "@class": "ELEMENT",
                                                                "name": {
                                                                    "@class": "DV_TEXT",
                                                                    "value": "Comment"
                                                                },
                                                                "archetype_node_id": "at0003",
                                                                "value": {
                                                                    "@class": "DV_TEXT",
                                                                    "value": "may be technical artefact"
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "@class": "CLUSTER",
                                                        "name": {
                                                            "@class": "DV_TEXT",
                                                            "value": "Laboratory result #2"
                                                        },
                                                        "archetype_node_id": "at0002",
                                                        "items": [
                                                            {
                                                                "@class": "ELEMENT",
                                                                "name": {
                                                                    "@class": "DV_CODED_TEXT",
                                                                    "value": "Creatinine",
                                                                    "defining_code": {
                                                                        "@class": "CODE_PHRASE",
                                                                        "terminology_id": {
                                                                            "@class": "TERMINOLOGY_ID",
                                                                            "value": "SNOMED-CT"
                                                                        },
                                                                        "code_string": "70901006"
                                                                    }
                                                                },
                                                                "archetype_node_id": "at0001",
                                                                "value": {
                                                                    "@class": "DV_QUANTITY",
                                                                    "normal_range": {
                                                                        "@class": "DV_INTERVAL",
                                                                        "lower": {
                                                                            "@class": "DV_QUANTITY",
                                                                            "magnitude": 80,
                                                                            "units": "mmol/l"
                                                                        },
                                                                        "upper": {
                                                                            "@class": "DV_QUANTITY",
                                                                            "magnitude": 110,
                                                                            "units": "mmol/l"
                                                                        },
                                                                        "lower_unbounded": false,
                                                                        "upper_unbounded": false
                                                                    },
                                                                    "magnitude": 127,
                                                                    "units": "mmol/l"
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "@class": "CLUSTER",
                                                        "name": {
                                                            "@class": "DV_TEXT",
                                                            "value": "Laboratory result #3"
                                                        },
                                                        "archetype_node_id": "at0002",
                                                        "items": [
                                                            {
                                                                "@class": "ELEMENT",
                                                                "name": {
                                                                    "@class": "DV_CODED_TEXT",
                                                                    "value": "Sodium",
                                                                    "defining_code": {
                                                                        "@class": "CODE_PHRASE",
                                                                        "terminology_id": {
                                                                            "@class": "TERMINOLOGY_ID",
                                                                            "value": "SNOMED-CT"
                                                                        },
                                                                        "code_string": "365761000"
                                                                    }
                                                                },
                                                                "archetype_node_id": "at0001",
                                                                "value": {
                                                                    "@class": "DV_QUANTITY",
                                                                    "normal_range": {
                                                                        "@class": "DV_INTERVAL",
                                                                        "lower": {
                                                                            "@class": "DV_QUANTITY",
                                                                            "magnitude": 133,
                                                                            "units": "mmol/l"
                                                                        },
                                                                        "upper": {
                                                                            "@class": "DV_QUANTITY",
                                                                            "magnitude": 146,
                                                                            "units": "mmol/l"
                                                                        },
                                                                        "lower_unbounded": false,
                                                                        "upper_unbounded": false
                                                                    },
                                                                    "magnitude": 135,
                                                                    "units": "mmol/l"
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "@class": "CLUSTER",
                                                        "name": {
                                                            "@class": "DV_TEXT",
                                                            "value": "Laboratory result #4"
                                                        },
                                                        "archetype_node_id": "at0002",
                                                        "items": [
                                                            {
                                                                "@class": "ELEMENT",
                                                                "name": {
                                                                    "@class": "DV_CODED_TEXT",
                                                                    "value": "365760004",
                                                                    "defining_code": {
                                                                        "@class": "CODE_PHRASE",
                                                                        "terminology_id": {
                                                                            "@class": "TERMINOLOGY_ID",
                                                                            "value": "SNOMED-CT"
                                                                        },
                                                                        "code_string": "Potassium"
                                                                    }
                                                                },
                                                                "archetype_node_id": "at0001",
                                                                "value": {
                                                                    "@class": "DV_QUANTITY",
                                                                    "normal_range": {
                                                                        "@class": "DV_INTERVAL",
                                                                        "lower": {
                                                                            "@class": "DV_QUANTITY",
                                                                            "magnitude": 3.5,
                                                                            "units": "mmol/l"
                                                                        },
                                                                        "upper": {
                                                                            "@class": "DV_QUANTITY",
                                                                            "magnitude": 5.3,
                                                                            "units": "mmol/l"
                                                                        },
                                                                        "lower_unbounded": false,
                                                                        "upper_unbounded": false
                                                                    },
                                                                    "magnitude": 5.3,
                                                                    "units": "mmol/l"
                                                                }
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                            {
                                                "@class": "ELEMENT",
                                                "name": {
                                                    "@class": "DV_TEXT",
                                                    "value": "Conclusion"
                                                },
                                                "archetype_node_id": "at0057",
                                                "value": {
                                                    "@class": "DV_TEXT",
                                                    "value": "Rapidly deteriorating renal function"
                                                }
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    }
                ]
            }
        }
    ]
}
